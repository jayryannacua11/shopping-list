const itemForm=document.getElementById("item-form"),itemInput=document.getElementById("item-input"),itemList=document.getElementById("item-list"),clearBtn=document.getElementById("clear"),itemFilter=document.getElementById("filter"),formBTn=itemForm.querySelector("button");let isEditMode=!1;function displayItems(){const itemsFromStorage=getItemsFromStorage();itemsFromStorage.forEach(item=>addItemToDOM(item)),checkUI()}function onAddItemSubmit(e){e.preventDefault();const newItem=itemInput.value;if(""!==newItem){if(isEditMode){const itemToEdit=itemList.querySelector(".edit-mode");if(checkIfItemExists(newItem))return void alert("That Item already exists!");removeItemFromStorage(itemToEdit.textContent),itemToEdit.classList.remove("edit-mode"),itemToEdit.remove(),isEditMode=!1}else if(checkIfItemExists(newItem))return void alert("That Item already exists!");addItemToDOM(newItem),addItemToStorage(newItem),checkUI(),itemInput.value=""}else alert("Please add an item")}const test=item=>{console.log("test")};function addItemToDOM(item){const li=document.createElement("li");li.appendChild(document.createTextNode(item));const button=createButton("remove-item btn-link text-red");li.appendChild(button),itemList.appendChild(li)}const createButton=classes=>{const button=document.createElement("button");button.className=classes;const icon=createIcon("fa-solid fa-xmark");return button.appendChild(icon),button},createIcon=classes=>{const icon=document.createElement("i");return icon.className=classes,icon};function addItemToStorage(item){const itemsFromStorage=getItemsFromStorage();itemsFromStorage.push(item),localStorage.setItem("items",JSON.stringify(itemsFromStorage))}function getItemsFromStorage(){let itemsFromStorage;return itemsFromStorage=null===localStorage.getItem("items")?[]:JSON.parse(localStorage.getItem("items")),itemsFromStorage}function onItemClick(e){e.target.parentElement.classList.contains("remove-item")?removeItem(e.target.parentElement.parentElement):setItemToEdit(e.target)}function checkIfItemExists(item){const itemsFromStorage=getItemsFromStorage().map(i=>i.toLowerCase());return itemsFromStorage.includes(item.trim().toLowerCase())}const setItemToEdit=item=>{isEditMode=!0,itemList.querySelectorAll("li").forEach(i=>i.classList.remove("edit-mode")),item.classList.add("edit-mode"),formBTn.innerHTML='<i class="fa-solid fa-pen"></i> Update Item',formBTn.style.backgroundColor="#228b22",itemInput.value=item.textContent};function removeItem(item){confirm("Are you sure?")&&(item.remove(),removeItemFromStorage(item.textContent),checkUI())}function removeItemFromStorage(item){let itemsFromStorage=getItemsFromStorage();itemsFromStorage=itemsFromStorage.filter(i=>i!==item),localStorage.setItem("items",JSON.stringify(itemsFromStorage))}const clearItems=()=>{for(;itemList.firstChild;)itemList.removeChild(itemList.firstChild);localStorage.removeItem("items"),checkUI()},filterItems=e=>{const items=itemList.querySelectorAll("li"),text=e.target.value.toLowerCase();items.forEach(item=>{const itemName=item.firstChild.textContent.toLowerCase();-1!=itemName.indexOf(text)?item.style.display="flex":item.style.display="none"})};function checkUI(){itemInput.value="";const items=itemList.querySelectorAll("li");0===items.length?(clearBtn.style.display="none",itemFilter.style.display="none"):(clearBtn.style.display="block",itemFilter.style.display="block"),formBTn.innerHTML='<i class="fa-solid fa-plus"></i> Add Item',formBTn.style.backgroundColor="#333",isEditMode=!1}function init(){itemForm.addEventListener("submit",onAddItemSubmit),itemList.addEventListener("click",onItemClick),clearBtn.addEventListener("click",clearItems),itemFilter.addEventListener("input",filterItems),document.addEventListener("DOMContentLoaded",displayItems),checkUI()}init();